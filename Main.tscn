[gd_scene load_steps=54 format=2]

[ext_resource path="res://car.gd" type="Script" id=1]
[ext_resource path="res://camera_pivot.gd" type="Script" id=2]
[ext_resource path="res://assets/Cadnav.com_B090242038.obj" type="ArrayMesh" id=3]

[sub_resource type="CubeMesh" id=1]
size = Vector3( 500, 1, 500 )

[sub_resource type="SpatialMaterial" id=2]
render_priority = -1
flags_world_triplanar = true
albedo_color = Color( 0.270588, 0.309804, 0.721569, 1 )

[sub_resource type="ConcavePolygonShape" id=3]
data = PoolVector3Array( -25, 0.5, 25, 25, 0.5, 25, -25, -0.5, 25, 25, 0.5, 25, 25, -0.5, 25, -25, -0.5, 25, 25, 0.5, -25, -25, 0.5, -25, 25, -0.5, -25, -25, 0.5, -25, -25, -0.5, -25, 25, -0.5, -25, 25, 0.5, 25, 25, 0.5, -25, 25, -0.5, 25, 25, 0.5, -25, 25, -0.5, -25, 25, -0.5, 25, -25, 0.5, -25, -25, 0.5, 25, -25, -0.5, -25, -25, 0.5, 25, -25, -0.5, 25, -25, -0.5, -25, 25, 0.5, 25, -25, 0.5, 25, 25, 0.5, -25, -25, 0.5, 25, -25, 0.5, -25, 25, 0.5, -25, -25, -0.5, 25, 25, -0.5, 25, -25, -0.5, -25, 25, -0.5, 25, 25, -0.5, -25, -25, -0.5, -25 )

[sub_resource type="SpatialMaterial" id=49]
albedo_color = Color( 0.0588235, 0.0392157, 0.396078, 1 )
metallic = 0.35

[sub_resource type="SpatialMaterial" id=9]
albedo_color = Color( 0.0392157, 0.0431373, 0.415686, 1 )
metallic = 0.33

[sub_resource type="SpatialMaterial" id=10]
albedo_color = Color( 0.780392, 0.74902, 0.74902, 1 )

[sub_resource type="SpatialMaterial" id=11]
albedo_color = Color( 0.835294, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=12]
albedo_color = Color( 0.113725, 0.0941176, 0.521569, 1 )
metallic = 0.38

[sub_resource type="SpatialMaterial" id=13]
albedo_color = Color( 0, 0, 0, 0.580392 )

[sub_resource type="SpatialMaterial" id=14]
albedo_color = Color( 0.192157, 0.196078, 0.203922, 1 )

[sub_resource type="SpatialMaterial" id=15]
albedo_color = Color( 0.196078, 0.105882, 0.623529, 1 )

[sub_resource type="SpatialMaterial" id=16]
albedo_color = Color( 0.0941176, 0.152941, 0.537255, 1 )

[sub_resource type="SpatialMaterial" id=17]
albedo_color = Color( 0.027451, 0.109804, 0.478431, 1 )

[sub_resource type="SpatialMaterial" id=18]
albedo_color = Color( 0.105882, 0.0666667, 0.568627, 1 )

[sub_resource type="SpatialMaterial" id=19]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=20]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=21]

[sub_resource type="SpatialMaterial" id=22]

[sub_resource type="SpatialMaterial" id=23]
albedo_color = Color( 0.00392157, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=24]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=25]
albedo_color = Color( 0.466667, 0.466667, 0.466667, 1 )

[sub_resource type="SpatialMaterial" id=26]
albedo_color = Color( 0.113725, 0.0627451, 0.47451, 1 )

[sub_resource type="SpatialMaterial" id=27]
albedo_color = Color( 0.0196078, 0.027451, 0.447059, 1 )

[sub_resource type="SpatialMaterial" id=28]
albedo_color = Color( 0, 0.0431373, 0.486275, 1 )

[sub_resource type="SpatialMaterial" id=29]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=30]

[sub_resource type="SpatialMaterial" id=31]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=32]
albedo_color = Color( 0.027451, 0, 0.588235, 1 )

[sub_resource type="SpatialMaterial" id=33]
albedo_color = Color( 0, 0.0156863, 0.654902, 1 )

[sub_resource type="SpatialMaterial" id=34]
albedo_color = Color( 0, 0.027451, 0.384314, 1 )

[sub_resource type="SpatialMaterial" id=35]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=36]
albedo_color = Color( 0.0196078, 0, 0.360784, 1 )

[sub_resource type="SpatialMaterial" id=40]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=38]
albedo_color = Color( 0, 0.00392157, 0.521569, 1 )

[sub_resource type="SpatialMaterial" id=39]
albedo_color = Color( 0.12549, 0, 0.580392, 1 )

[sub_resource type="SpatialMaterial" id=41]

[sub_resource type="SpatialMaterial" id=42]
albedo_color = Color( 0.054902, 0, 0.611765, 1 )

[sub_resource type="SpatialMaterial" id=43]
albedo_color = Color( 0.0313726, 0, 0.529412, 1 )

[sub_resource type="SpatialMaterial" id=44]
albedo_color = Color( 0.0862745, 0, 0.466667, 1 )

[sub_resource type="SpatialMaterial" id=45]
albedo_color = Color( 0, 0.0196078, 0.372549, 1 )

[sub_resource type="SpatialMaterial" id=46]
albedo_color = Color( 0.027451, 0, 0.423529, 1 )

[sub_resource type="SpatialMaterial" id=47]
albedo_color = Color( 0.0784314, 0, 0.596078, 1 )

[sub_resource type="SpatialMaterial" id=48]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="ConvexPolygonShape" id=5]
points = PoolVector3Array( -0.7225, -0.25, -1.43083, 0.694167, 0.25, 1.37472, -0.694167, 0.25, 1.37472, 0.7225, -0.25, 1.43083, 0.694167, 0.25, -1.37472, -0.7225, -0.25, 1.43083, 0.7225, -0.25, -1.43083, -0.694167, 0.25, -1.37472 )

[sub_resource type="SpatialMaterial" id=6]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="CylinderMesh" id=7]
material = SubResource( 6 )
top_radius = 0.4
bottom_radius = 0.4
height = 0.25
radial_segments = 12

[sub_resource type="Curve3D" id=50]
_data = {
"points": PoolVector3Array( 9.46155, 1.61565, -13.5246, -9.46155, -1.61565, 13.5246, 20.6765, -1.14803, -0.358524, -2.48273, -1.52588e-05, -1.97523, 2.48273, 1.52588e-05, 1.97523, 27.677, 0.0087738, 13.226, 0, 0, 0, 0, 0, 0, 30.9412, -0.187586, 19.1096, -0.799187, -7.62939e-06, -2.41809, 0.799187, 7.62939e-06, 2.41809, 33.5274, -0.343163, 23.7711, 0, 0, 0, 0, 0, 0, 31.0022, 0.0693665, 33.7793, 3.06363, 0.171874, -3.05359, -3.06363, -0.171874, 3.05359, 24.2525, 0.311522, 41.5555, 2.75823, -0.541982, -1.51627, -2.75823, 0.541982, 1.51627, 12.735, 0.0350037, 46.1595, 0, 0, 0, 0, 0, 0, 2.04705, 0.0347595, 45.6205, 1.604, -0.973244, 2.14176, -1.604, 0.973244, -2.14176, -9.36144, 0.0329285, 43.0787, 0.101885, -1.56108, 6.10833, -0.101885, 1.56108, -6.10833, -20.6926, 0.0227051, 29.9918, 0, 0, 0, 0, 0, 0, -20.7516, 0.00393677, 7.0212, 0, 0, 0, 0, 0, 0, -14.0251, -0.00466919, -3.81585, -2.89716, 7.62939e-06, 7.79953, 2.89716, -7.62939e-06, -7.79953, -0.52481, -0.0163651, -18.6338, 0, 0, 0, 0, 0, 0, -9.72765, -0.0257263, -29.4137, 0, 0, 0, 0, 0, 0, -19.8173, -0.026825, -32.0296, 0, 0, 0, 0, 0, 0, -31.2824, -0.0257416, -31.0748, 5.65688, 1.52588e-05, -0.40922, -5.65688, -1.52588e-05, 0.40922, -43.1985, -0.0233307, -28.3087, 7.10069, 0, 0.354893, -7.10069, 0, -0.354893, -63.3058, -0.0239868, -29.5865, 3.11498, 1.52588e-05, 3.48907, -3.11498, -1.52588e-05, -3.48907, -77.47, -0.027298, -34.0905, 0, 0, 0, 0, 0, 0, -82.1293, -0.0408783, -51.2512, -6.25421, 1.52588e-05, 4.001, 6.25421, -1.52588e-05, -4.001, -76.1484, -0.05513, -69.0187, -5.53239, 1.52588e-05, 1.90353, 5.53239, -1.52588e-05, -1.90353, -60.6038, -0.0613556, -76.5099, -4.63669, 1.52588e-05, -1.59456, 4.63669, -1.52588e-05, 1.59456, -41.8086, -0.063797, -79.1759, -0.719917, 0, -4.89409, 0.719917, 0, 4.89409, -31, 0, -68, -1.83076, 0, -6.56958, 1.83076, 0, 6.56958, -38.4504, -0.0435181, -53.6538, 0, 0, 0, 0, 0, 0, -23.776, -0.0384064, -46.9015, -6.56469, 1.52588e-05, 0.388371, 6.56469, -1.52588e-05, -0.388371, -7.86147, -0.037735, -45.7152, -3.33255, 1.52588e-05, 2.57183, 3.33255, -1.52588e-05, -2.57183, 2.4332, -0.0461884, -56.1175, 0, 0, 0, 0, 0, 0, 16.5985, -0.0530701, -64.4776, 0, 0, 0, 0, 0, 0, 32.3555, -0.056839, -68.8879, -0.823555, 0.840534, 2.18523, 0.823555, -0.840534, -2.18523, 43.7133, -0.0632782, -76.75, -0.20314, 0.155884, 0.179344, 0.20314, -0.155884, -0.179344, 62.1497, -0.0628204, -75.7884, 0.380981, -1.61712, -2.05167, -0.380981, 1.61712, 2.05167, 68.2152, 0.428749, -60.7938, 5.24869, -0.816425, -2.04949, -5.24869, 0.816425, 2.04949, 54.2964, -0.0414276, -49.1127, 4.41576, -0.368717, -2.70329, -4.41576, 0.368717, 2.70329, 42.0462, -0.0431976, -51.6173, 5.43316, -2.58963, 3.24635, -5.43316, 2.58963, -3.24635, 28.3373, -0.0427551, -51.3572, 0, 0, 0, 0, 0, 0, 17.0466, -0.0387421, -46.5698, -11.9134, -0.595951, -4.4617, 11.9134, 0.595951, 4.4617, 20.3083, -0.0251465, -29.4396, -8.90221, -1.10917, -5.17819, 8.90221, 1.10917, 5.17819, 39.0241, -0.0246887, -28.4718, -9.77569, 0.437069, -1.08853, 9.77569, -0.437069, 1.08853, 56.2265, -0.0200043, -22.2236, -8.16588, -0.553726, -3.46175, 8.16588, 0.553726, 3.46175, 69.7889, -0.0151062, -15.7752, 0, 0, 0, 0, 0, 0, 94.8117, -0.0102081, -9.07662, 2.10403, 0.749149, -7.63218, -2.10403, -0.749149, 7.63218, 102.656, -0.00062561, 3.11978, 4.09209, -0.091217, -1.48072, -4.09209, 0.091217, 1.48072, 90.4592, 0.00582886, 10.9636, 0, 0, 0, 0, 0, 0, 66.7729, 0.00317383, 7.09082, 6.63863, 0.595539, 2.63543, -6.63863, -0.595539, -2.63543, 50.3902, -1.05258, 3.20474, 5.52382, -0.0587883, 0.969378, -5.52382, 0.0587883, -0.969378, 38.6338, 0.0908661, -7.19424, 7.43691, -0.912826, -10.912, -7.43691, 0.912826, 10.912, 20.6671, -1.16722, -0.3248 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 )
}

[sub_resource type="Shader" id=51]
code = "shader_type spatial;

uniform sampler2D road_texture;

void fragment() {
	vec2 road_uv = vec2(UV.y, UV.x);
	
	vec4 color = texture(road_texture, road_uv);
	ALBEDO = color.rbg;
	METALLIC = 0.0;
	ROUGHNESS = 0.8;
}"

[sub_resource type="ImageTexture" id=53]

[sub_resource type="ShaderMaterial" id=52]
shader = SubResource( 51 )
shader_param/road_texture = SubResource( 53 )

[node name="Game" type="Spatial"]

[node name="ground" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.489624, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 2 )

[node name="StaticBody" type="StaticBody" parent="ground"]

[node name="CollisionShape" type="CollisionShape" parent="ground/StaticBody"]
transform = Transform( 100, 0, 0, 0, 1, 0, 0, 0, 100, 0, 0, 0 )
shape = SubResource( 3 )

[node name="car" type="VehicleBody" parent="."]
transform = Transform( 0.797542, 0, 0.603264, 0, 1, 0, -0.603264, 0, 0.797542, 26.7317, 1, 13.5706 )
script = ExtResource( 1 )

[node name="car_body" type="MeshInstance" parent="car"]
transform = Transform( 0.03, 0, 0, 0, -1.31134e-09, 0.03, 0, -0.03, -1.31134e-09, 0, -0.562189, 0 )
mesh = ExtResource( 3 )
material/0 = SubResource( 49 )
material/1 = SubResource( 9 )
material/2 = SubResource( 10 )
material/3 = SubResource( 11 )
material/4 = SubResource( 12 )
material/5 = SubResource( 13 )
material/6 = SubResource( 14 )
material/7 = SubResource( 15 )
material/8 = SubResource( 16 )
material/9 = SubResource( 17 )
material/10 = SubResource( 18 )
material/11 = SubResource( 19 )
material/12 = SubResource( 20 )
material/13 = SubResource( 21 )
material/14 = SubResource( 22 )
material/15 = SubResource( 23 )
material/16 = SubResource( 24 )
material/17 = SubResource( 25 )
material/18 = SubResource( 26 )
material/19 = SubResource( 27 )
material/20 = SubResource( 28 )
material/21 = SubResource( 29 )
material/22 = SubResource( 30 )
material/23 = SubResource( 31 )
material/24 = SubResource( 32 )
material/25 = SubResource( 33 )
material/26 = SubResource( 34 )
material/27 = SubResource( 35 )
material/28 = SubResource( 36 )
material/29 = SubResource( 40 )
material/30 = SubResource( 38 )
material/31 = SubResource( 39 )
material/32 = SubResource( 41 )
material/33 = SubResource( 42 )
material/34 = SubResource( 43 )
material/35 = SubResource( 44 )
material/36 = SubResource( 45 )
material/37 = SubResource( 46 )
material/38 = SubResource( 47 )
material/39 = SubResource( 48 )
material/40 = SubResource( 49 )
material/41 = SubResource( 49 )
material/42 = SubResource( 49 )
material/43 = SubResource( 49 )
material/44 = SubResource( 49 )
material/45 = SubResource( 49 )
material/46 = SubResource( 49 )
material/47 = SubResource( 49 )
material/48 = SubResource( 49 )
material/49 = SubResource( 49 )
material/50 = SubResource( 49 )
material/51 = SubResource( 49 )
material/52 = SubResource( 49 )
material/53 = SubResource( 49 )
material/54 = SubResource( 49 )
material/55 = SubResource( 49 )
material/56 = SubResource( 49 )
material/57 = SubResource( 49 )
material/58 = SubResource( 49 )
material/59 = SubResource( 49 )
material/60 = SubResource( 49 )
material/61 = SubResource( 49 )
material/62 = SubResource( 49 )
material/63 = SubResource( 49 )
material/64 = SubResource( 49 )
material/65 = SubResource( 49 )
material/66 = SubResource( 49 )
material/67 = SubResource( 49 )
material/68 = SubResource( 49 )
material/69 = SubResource( 49 )
material/70 = SubResource( 49 )
material/71 = SubResource( 49 )
material/72 = SubResource( 49 )
material/73 = SubResource( 49 )
material/74 = SubResource( 49 )
material/75 = SubResource( 49 )
material/76 = SubResource( 49 )
material/77 = SubResource( 49 )
material/78 = SubResource( 49 )
material/79 = SubResource( 49 )
material/80 = SubResource( 49 )

[node name="CollisionShape" type="CollisionShape" parent="car"]
transform = Transform( 1.143, 0, 0, 0, 1.983, 0, 0, 0, 1.393, 0, 0.255, 0 )
shape = SubResource( 5 )

[node name="front_left_wheel" type="VehicleWheel" parent="car"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.881831, -0.124729, 1.27406 )
use_as_steering = true
wheel_radius = 0.4
suspension_stiffness = 50.0
damping_compression = 1.9
damping_relaxation = 2.0

[node name="MeshInstance" type="MeshInstance" parent="car/front_left_wheel"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0 )
mesh = SubResource( 7 )

[node name="front_right_wheel" type="VehicleWheel" parent="car"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.858989, -0.124729, 1.27406 )
use_as_steering = true
wheel_radius = 0.4
suspension_stiffness = 50.0
damping_compression = 1.9
damping_relaxation = 2.0

[node name="MeshInstance" type="MeshInstance" parent="car/front_right_wheel"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0 )
mesh = SubResource( 7 )

[node name="back_left_wheel" type="VehicleWheel" parent="car"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.881831, -0.124729, -1.46826 )
use_as_traction = true
wheel_radius = 0.4
suspension_stiffness = 50.0
damping_compression = 1.9
damping_relaxation = 2.0

[node name="MeshInstance" type="MeshInstance" parent="car/back_left_wheel"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0 )
mesh = SubResource( 7 )

[node name="back_right_wheel" type="VehicleWheel" parent="car"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.859086, -0.124729, -1.46826 )
use_as_traction = true
wheel_radius = 0.4
suspension_stiffness = 50.0
damping_compression = 1.9
damping_relaxation = 2.0

[node name="MeshInstance" type="MeshInstance" parent="car/back_right_wheel"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0 )
mesh = SubResource( 7 )

[node name="camera_pivot" type="Spatial" parent="car"]
script = ExtResource( 2 )

[node name="Camera" type="Camera" parent="car/camera_pivot"]
transform = Transform( -0.999847, 6.98385e-10, -0.0175047, -0.00603945, 0.938595, 0.344967, 0.0164298, 0.34502, -0.938452, 0, 3.52056, -5.03512 )

[node name="Track" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -26.4857, 0 )
visible = false

[node name="Path" type="Path" parent="Track"]
curve = SubResource( 50 )

[node name="Road" type="CSGPolygon" parent="Track/Path"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00469685, -0.0116816, -0.00434208 )
use_collision = true
invert_faces = true
polygon = PoolVector2Array( -5, 0, -5, 0.1, 5, 0.1, 5, 0 )
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = false
material = SubResource( 52 )

[node name="CollisionShape" type="CSGPolygon" parent="Track/Path"]
use_collision = true
invert_faces = true
polygon = PoolVector2Array( -4, 0, 4, 0, 4, 2, 8, 2, 8, -1, -8, -1, -8, 2, -4, 2 )
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = false
path_u_distance = 1.0
path_joined = false

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 1, 0, 0, 0, 0.0618672, 0.998084, 0, -0.998084, 0.0618672, 0, 27.7538, -32.1162 )
light_energy = 7.018
shadow_enabled = true
